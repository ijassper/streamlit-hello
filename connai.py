# -*- coding: utf-8 -*-
"""connAI.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/12yUZCSu484ybqurPEXaUC8CPxmRYT0IP
"""

import streamlit as st
import openai

st.title("êµì‚¬ ê³„íšì„œ AI í”¼ë“œë°±")

# OpenAI API í‚¤ ì…ë ¥
openai_api_key = st.text_input("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", type="password")

# ì‚¬ìš©ì ì…ë ¥ ë°›ê¸°
user_input = st.text_area("âœï¸ ê³„íšì„œ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”")

if st.button("AI í”¼ë“œë°± ë°›ê¸°"):
    if not openai_api_key:
        st.warning("API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")
    elif not user_input.strip():
        st.warning("ê³„íšì„œ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
    else:
        with st.spinner("AIê°€ í”¼ë“œë°±ì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤..."):
            # OpenAI API í˜¸ì¶œ
            openai.api_key = openai_api_key
            response = openai.ChatCompletion.create(
                model="gpt-4",
                messages=[
                    {"role": "system", "content": "ë‹¹ì‹ ì€ êµìœ¡ê³„ì—ì„œ ì¼í•˜ëŠ” ì „ë¬¸ê°€ì´ë©°, êµì‚¬ì˜ ìˆ˜ì—… ê³„íšì„œì— ëŒ€í•´ ì¹œì ˆí•˜ê³  êµ¬ì²´ì ì¸ í”¼ë“œë°±ì„ ì œê³µí•©ë‹ˆë‹¤."},
                    {"role": "user", "content": user_input}
                ]
            )
            feedback = response['choices'][0]['message']['content']
            st.success("âœ… í”¼ë“œë°± ìƒì„± ì™„ë£Œ!")
            st.markdown("### ğŸ§  AI í”¼ë“œë°±")
            st.write(feedback)